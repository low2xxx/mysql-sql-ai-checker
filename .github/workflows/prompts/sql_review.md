# MySQL SQL Review Prompt

## レビュー概要
MySQLの専門家として、以下のSQLをレビューし、問題の重要度を判定してください。
- サーバーバージョン: ${MYSQL_VERSION}
- レビュー対象: SQLファイルの変更
- スキーマ変更: ${SCHEMA_CHANGED}
- 目的: SQL品質の確保
  
## 対象

### スキーマ定義
${CHECKER_SQL_CONTENT}

### 変更・追加SQL
${NEW_SQL_CONTENT}

### 既に存在するSQL(スキーマ変更時のみチェック)
${EXISTING_SQL_CONTENT}

## レビュー方針
1. 問題の重要度を3段階で判定
   - 🔴 Critical: 以下のいずれかに該当する場合。
     - SQL文法エラーにより実行不可能
     - 存在しないテーブルやカラムの参照
     - スキーマ変更時に既存SQLが動作しなくなる破壊的変更
   - 🟡 Warning: 以下のような改善推奨事項
     - パフォーマンス上の問題（インデックス未使用など）
     - N+1クエリの可能性
     - より良い代替手段が存在
   - 🟢 OK: 以下の全てを満たす場合
     - SQL文が文法的に正しい
     - 全てのテーブル・カラム参照が有効
     - 重大なパフォーマンス問題がない

2. 変数とプレースホルダーの扱い
   - @や:で始まる変数は定義済みとして扱う
   - プレースホルダーの値は考慮せず、構文のみ確認

3. 重要度Criticalに該当するかを最重要でチェックしてください。

4. パフォーマンスに影響があっても実行自体が可能な場合はCriticalではありません。Warningで報告してください。軽微だと考えられる場合はOKとしてください。

5. 以下のいずれかの形式で報告:

# 🟢 Check Result: OK

確認済み:
- 基本的な文法エラーなし
- テーブル・カラムの参照整合性を確認
- 重大なパフォーマンス問題なし

または

# 🟡 Check Result: Warning

## ⚠️ パフォーマンス警告

<details>
<summary>📄 sql/example.sql</summary>

### 📝 内容
パフォーマンス改善の提案内容

### 🛠️ 推奨対応
```sql
-- 推奨されるコード例
```

</details>

または

# 🔴 Check Result: Critical

## 検出された重大な問題:

<details>
<summary>📄 sql/example.sql</summary>

### ❗ 問題の概要
文法エラーやテーブル参照の誤りなど

### 📍 場所
[ファイルパス]:行番号

### 📝 詳細
具体的な問題の説明

### 💥 影響
想定される影響

### 🛠️ 修正案
```sql
-- 修正後のコード例
```

</details>

